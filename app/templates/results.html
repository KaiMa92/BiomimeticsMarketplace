<!-- templates/results.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <title>Results</title>
    <!-- Add Slick CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick-theme.min.css"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <div class="content-wrapper-results">
        <div class="container">
            <!-- Display Query and Location -->
            <h1 id="query">{{ results_data.Query }}</h1>
            <h2 id="location">{{ results_data.Location }}</h2>

            <!-- Placeholder for dynamically loaded content -->
            <div class="carousel" id="results-carousel">
                <!-- Results will be dynamically injected here -->
            </div>
            <p id="no-results-message" style="display:none;">No results found.</p>
        </div>

        <!-- Add jQuery and Slick JS -->
        
        

        <!-- Include external JavaScript files -->
        
        

        <!-- Pass results data to JavaScript -->
        <script>
            const resultsData =  results_data|tojson|safe ;  // Pass the results data from Flask to JavaScript

            $(document).ready(function() {
                const authors = resultsData.Authors;
                const carousel = $('#results-carousel');

                if (authors.length === 0) {
                    $('#no-results-message').show();
                } else {
                    authors.forEach(author => {
                        const slide = `
                            <div>
                                <h3>${author.author_name}</h3>
                                <p>${author.affiliations.join(', ')}</p>
                                <p>${author.summary}</p>
                                <p>Sources: ${author.sources.join(', ')}</p>
                            </div>
                        `;
                        carousel.append(slide);
                    });

                    // Initialize the carousel
                    carousel.slick({
                        dots: true,
                        infinite: true,
                        speed: 300,
                        slidesToShow: 1,
                        slidesToScroll: 1
                    });
                }
            });
        </script>
    </div>
</body>
</html>