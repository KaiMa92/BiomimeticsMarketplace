<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search for Experts</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <div class="content-wrapper">
        <div class="header-container">
            <img src="{{ url_for('static', filename='images/MarketplaceLogo.png') }}" alt="Main Logo" class="main-logo">
            <h2 class="subtitle">
                Find experts from biology for your technical problem<br /> and support from engineering for research into biological phenomena.
            </h2>
        </div>

        <main>
            
            <form id="searchForm" class="search-form">
                <input type="text" id="search" class="search-input" name="query" autocomplete="off" placeholder="Type your query here..." required>
                <button type="submit" id="startButton" class="techy-button">Search</button>
            </form>

            <div class="example-queries">
                <button type="button" class="techy-button example-query-button" data-query="Develop a gripping system for various sized objects.">
                    Develop a gripping system for various sized objects.
                </button>
                <button type="button" class="techy-button example-query-button" data-query="Modeling the mechanics of ants' chewing apparatus.">
                    Modeling the mechanics of ants' chewing apparatus.
                </button>
                <button type="button" class="techy-button example-query-button" data-query="Razor clam diggs very efficient by creating quicksand.">
                    Razor clam diggs very efficient by creating quicksand.
                </button>
            </div>

            {% if error_message %}
            <p class="error-message">{{ error_message }}</p>
            {% endif %}

            <div id="progress-container" style="display:none;">
                <div id="progress-circle"></div>
                <div id="progress-text">Starting your request...</div>
            </div>
        </main>

        <p class="author-info" style="padding-bottom: 25px">
            Experimental Software - Prototype<br />
            Created by Max Kaiser at Leibniz-Institut f&uuml;r Verbundwerkstoffe GmbH<br />
            as part of the project "Transferplattform für Biologie und Technik TVH:C", funded by the <br />
            Bundesministerium für Forschung, Technologie und Raumfahrt (F&ouml;rderkennzeichen 01IO2306C)
        </p>
        
        <div class="footer-section">
            <div class="footer-logos">
                <img src="{{ url_for('static', filename='images/BMFTR.jpg') }}" alt="Logo 1" class="footer-logo">
                <img src="{{ url_for('static', filename='images/IVW.png') }}" alt="Logo 4" class="footer-logo">
                <img src="{{ url_for('static', filename='images/Senckenberg.png') }}" alt="Logo 3" class="footer-logo">
                <img src="{{ url_for('static', filename='images/THM.png') }}" alt="Logo 2" class="footer-logo">
            </div>
        </div>
        
        <div class="legal-links">
            <a href="{{ url_for('main.index') }}">Home</a>
            <a href="{{ url_for('main.about') }}">About</a>
            <a href="{{ url_for('main.privacy') }}">Privacy Policy</a>
            <a href="{{ url_for('main.impressum') }}">Legal Notice</a>
        </div>

    </div>
    <script src="{{ url_for('static', filename='js/progress_update.js') }}"></script>
    <!-- disable the button after click -->
    <script>
        const searchForm = document.getElementById('searchForm');
        const startButton = document.getElementById('startButton');
        const searchInput = document.getElementById('search');

        searchForm.addEventListener('submit', function() {
            startButton.disabled = true;
            startButton.textContent = 'Searching...';
        });

        document.querySelectorAll('.example-query-button').forEach((button) => {
            button.addEventListener('click', () => {
                const query = button.getAttribute('data-query');
                searchInput.value = query;
                if (typeof searchForm.requestSubmit === 'function') {
                    searchForm.requestSubmit(startButton);
                } else {
                    startButton.click();
                }
            });
        });
    </script>
</body>
</html>
